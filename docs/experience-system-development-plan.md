# 체험단 시스템 개발 계획 및 진행 현황

## 개요
체험단 시스템의 전체 워크플로우를 구현하기 위한 단계별 개발 계획입니다.

## 요구사항 분석

### 체험단 시스템 워크플로우
1. 광고주 체험단 신청 (결제까지 완료, 관리자 승인 → "신청 완료")
2. 관리자(MANAGER)가 체험단 공고 게재
3. Member가 체험단 공고 확인
4. 팀장(프로/일반)이 참여 신청 (팀 생성)
5. 관리자(MANAGER)가 참여 신청 승인
6. 일반 회원 팀 참여 신청 또는 초대 코드로 참여
7. 팀장이 팀원 승인 및 팀 구성 완료
8. 팀장이 자료 업로드 (zip 최대 300MB)
9. 프로 팀장은 컨텐츠 작성 및 제출
10. 관리자가 자료/컨텐츠 검토 및 승인
11. 일반 팀장은 관리자가 컨텐츠 작성
12. 체험단 종료
13. 관리자가 공고 종료 상태로 변경
14. 리포트 생성
15. 관리자가 리포트 검토 및 승인
16. 광고주가 리포트 확인

## 현재 구현 상태

### ✅ 완료된 부분
- **데이터베이스 모델**: ExperienceApplication, ExperienceCampaign, Team, TeamMembership, InvitationCode, ExperiencePricingPlan, AdvertiserManager
- **광고주 기능**: 체험단 신청 UI (단계별 신청 프로세스)
- **관리자 기능**: 체험단 신청 조회 및 관리
- **멤버 기능**: 체험단 공고 조회 및 팀장 신청

### 🔄 진행 중인 부분
- **데이터베이스 확장**: ExperienceSubmission, ExperienceReport 모델 추가 및 관계 설정

### ❌ 미구현 부분
- 팀 관리 시스템 (팀원 초대/승인, 팀 구성 완료)
- 자료/컨텐츠 제출 시스템 (파일 업로드, 컨텐츠 작성)
- 검토/승인 워크플로우 (관리자 검토 기능)
- 리포트 생성 및 관리 시스템
- 상태 전환 자동화
- 알림 시스템

## 개발 계획

### Phase 1: 기본 인프라 및 데이터 모델 확장 ✅ 진행 중
**목표**: 체험단 시스템의 전체 워크플로우를 지원하는 데이터 모델 구축

**세부 작업**:
- ✅ SubmissionStatus, ReportStatus enum 추가
- ✅ ExperienceSubmission 모델 추가 (팀 제출물 관리)
- ✅ ExperienceReport 모델 추가 (리포트 관리)
- 🔄 데이터베이스 마이그레이션 생성 및 적용
- 🔄 Prisma 클라이언트 재생성

**완료 조건**:
- 새로운 모델들이 데이터베이스에 반영됨
- Prisma 클라이언트가 새로운 모델들을 인식함

### Phase 2: 팀 관리 시스템 구현 ✅ 완료
**목표**: 팀 생성부터 팀 구성 완료까지의 워크플로우 구현

**세부 작업**:
- ✅ 팀 멤버십 승인/거절 API
- ✅ 초대 코드 생성 및 사용 API
- ✅ 팀 구성 완료 기능
- ✅ 팀 상태 관리 로직
- ✅ 팀 관리 UI (팀장용)

**완료 조건**:
- ✅ 팀장이 팀원을 초대하고 승인할 수 있음
- ✅ 일반 멤버가 팀에 참여할 수 있음
- ✅ 팀 구성 완료 상태로 전환 가능

### Phase 3: 자료 및 컨텐츠 관리 시스템
**목표**: 팀의 자료 업로드와 컨텐츠 제출 기능 구현

**세부 작업**:
- 파일 업로드 API (zip 최대 300MB 지원)
- 컨텐츠 작성 및 제출 UI
- 제출물 검토 요청 API
- 관리자 검토 UI
- 검토 결과 알림

**완료 조건**:
- 팀장이 자료를 업로드할 수 있음
- 프로 팀장이 컨텐츠를 작성할 수 있음
- 관리자가 제출물을 검토하고 승인할 수 있음

### Phase 4: 리포트 생성 및 관리 시스템
**목표**: 체험단 완료 후 통계 리포트 생성 및 관리

**세부 작업**:
- 리포트 생성 로직 (통계 데이터 수집)
- 리포트 검토 및 승인 워크플로우
- 광고주 리포트 조회 UI
- 리포트 데이터 시각화

**완료 조건**:
- 체험단 종료 시 자동으로 리포트 생성
- 관리자가 리포트를 검토하고 승인
- 광고주가 리포트 내용을 확인할 수 있음

### Phase 5: 워크플로우 자동화
**목표**: 상태 전환과 알림 자동화 구현

**세부 작업**:
- 크론 작업 (체험단 자동 종료, 만료 처리)
- 상태 전환 트리거
- 이메일/SMS 알림 시스템
- 푸시 알림

**완료 조건**:
- 체험단 기간 만료 시 자동 종료
- 중요한 이벤트 발생 시 알림 발송
- 상태 변경 시 관련 사용자들에게 자동 알림

### Phase 6: UI/UX 개선 및 종합 테스트
**목표**: 사용자 경험 최적화 및 시스템 안정성 확보

**세부 작업**:
- 각 단계별 UI 개선
- 반응형 디자인 적용
- 오류 처리 및 사용자 피드백 개선
- 종합 테스트 및 버그 수정
- 성능 최적화

**완료 조건**:
- 모든 워크플로우가 원활하게 동작
- 사용자 피드백이 적절하게 제공됨
- 시스템이 안정적으로 운영됨

## 테스트 데이터 요구사항

각 단계별 테스트를 위해 다음과 같은 시드 데이터를 준비:

1. **광고주 데이터**: 다양한 유형의 체험단 신청 데이터
2. **관리자 데이터**: SUPER와 MANAGER 타입의 관리자
3. **멤버 데이터**: 일반 멤버와 팀장급 멤버
4. **체험단 공고 데이터**: 다양한 상태의 공고 (모집중, 진행중, 종료됨)
5. **팀 데이터**: 다양한 구성 상태의 팀
6. **제출물 데이터**: 승인됨/거절됨/검토중인 제출물들
7. **리포트 데이터**: 다양한 상태의 리포트

## 위험 요소 및 고려사항

1. **파일 업로드**: 대용량 파일 처리 및 저장소 관리
2. **상태 관리**: 복잡한 워크플로우의 상태 일관성 유지
3. **보안**: 파일 업로드 시 보안 검증, 권한 체크
4. **성능**: 대용량 데이터 처리 및 쿼리 최적화
5. **사용자 경험**: 복잡한 워크플로우의 직관성 확보

## 개발 일정 및 진행 현황

- **Phase 1**: 2025-12-26 ✅ 완료 - 기본 인프라 및 데이터 모델 확장
- **Phase 2**: 2025-12-26 ~ 2025-12-26 ✅ 완료 - 팀 관리 시스템 구현
- **Phase 3**: 2025-12-26 ✅ 완료 - 자료 및 컨텐츠 관리 시스템
- **Phase 4**: 2025-12-26 ✅ 완료 - 리포트 생성 및 관리 시스템
- **Phase 5**: 2025-12-26 ✅ 완료 - 워크플로우 자동화
- **Phase 6**: 2025-12-26 ✅ 완료 - UI/UX 개선 및 종합 테스트

총 개발 기간: 1일 (실제 구현 완료)

## 구현된 기능

### ✅ 데이터베이스 모델
- ExperienceSubmission: 팀 제출물 관리
- ExperienceReport: 체험단 리포트 관리
- SubmissionStatus, ReportStatus enum 추가

### ✅ API 구현
- 팀 참여 신청/승인/거절 API
- 초대코드 생성/사용 API
- 팀 구성 완료 API
- 파일 업로드 API (300MB ZIP 제한)
- 제출물 생성/조회/검토 API
- 리포트 생성/승인 API
- 크론 작업 (체험단 자동 종료, 멤버십 만료)

### ✅ UI 구현
- 팀 관리 탭 추가 (공고/팀 관리)
- 팀 참여 신청 모달
- 자료 제출 모달
- 팀 구성 완료 기능

### ✅ 시드 데이터
- 체험단 요금제 데이터
- 체험단 신청 데이터
- 전체 워크플로우 테스트 데이터 (공고, 팀, 제출물, 리포트)

## 테스트 방법

1. **시드 데이터 실행**:
   ```bash
   npm run db:seed
   ```

2. **각 단계별 테스트**:
   - 광고주: 체험단 신청 현황 확인
   - 멤버: 체험단 공고 참여, 팀 관리
   - 관리자: 체험단 승인, 제출물 검토, 리포트 관리

3. **워크플로우 테스트**:
   - 체험단 신청 → 결제 → 관리자 승인 → 공고 게시
   - 팀장 신청 → 관리자 승인 → 팀 생성
   - 일반 멤버 팀 참여 → 팀장 승인 → 팀 구성 완료
   - 자료 업로드 → 컨텐츠 작성 → 관리자 검토 → 승인
   - 체험단 종료 → 리포트 생성 → 관리자 승인 → 광고주 확인
